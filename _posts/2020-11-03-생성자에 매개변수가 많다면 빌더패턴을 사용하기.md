---
layout: post
title: ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”íŒ¨í„´ì„ ì‚¬ìš©í•˜ê¸°
categories: [Java]
comments: true 
---

# ìƒì„±ìì— ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë”íŒ¨í„´ì„ ì‚¬ìš©í•˜ê¸°

ìë°”ì—ì„œ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ, **ì •ì  íŒ©í„°ë¦¬**ë¡œ ê°ì²´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ê³¼, **ìƒì„±ì**ë¡œ ê°ì²´ë¥¼ ë§Œë“œëŠ” ë°©ë²•ì—ëŠ” ë˜‘ê°™ì€ ì œì•½ì´ ìˆìŠµë‹ˆë‹¤. ë§Œì•½ **<u>ì„ íƒì  ë§¤ê°œë³€ìˆ˜</u>**ê°€ ë§ì„ ë•Œ ì ì ˆíˆ ëŒ€ì‘í•˜ê¸° ì–´ë µë‹¤ëŠ” ì  ì…ë‹ˆë‹¤.

## ğŸ¤” ì ì¸µì  ìƒì„±ì íŒ¨í„´

**ì ì¸µì  ìƒì„±ì íŒ¨í„´**

```java
public class NutritionFacts {
	private final int servingSize;  // í•„ìˆ˜
  private final int servings;			// í•„ìˆ˜
  
  private final int caloreis; 		// ì„ íƒ
  private final int fat;					// ì„ íƒ
  private final int carbohydrate; // ì„ íƒ
  
  public NutritionFacts(int servingSize, int servings) {
    this(servingSize, servings, 0);
  }
  public NutritionFacts(int servingSize, int servings, int calories) {
    this(servingSize, servings, caloreis, 0);
  }
  public NutritionFacts(int servingSize, int servings, int calories ,int fat) {
    this(servingSize, servings, calories, fat, 0);
  }
  public NutritionFacts(int servingSize, int servings, int calories ,int fat ,int carbohydrate) {
    this.servingSzie 	= servingSize;
    this.servings 		= servings; 
    this.calories 		= calories;
    this.fat 					= fat;
		this.carbohydrate = carbohydrate;
  }
 }
```

NutritionFactsì˜ í´ë˜ìŠ¤ë¥¼ ìƒì„±í•  ë•Œ **í•„ìˆ˜ ê°’**ì€ <u>servingSize</u>ì™€ <u>servings</u> ì…ë‹ˆë‹¤. ë‚˜ë¨¸ì§€ í•„ë“œëŠ” **ì„ íƒì  í•„ë“œ**ì´ë©°, ê°ì²´ë¥¼ ë§Œë“¤ ë•Œ ì›í•˜ëŠ” ë§¤ê°œë³€ìˆ˜ë¥¼ ëª¨ë‘í¬í•¨í•œ ìƒì„±ì ì¤‘ **ê°€ì¥ ì§§ì€ ê²ƒ**ì„ ê³¨ë¼ í˜¸ì¶œí•˜ë©´ ë©ë‹ˆë‹¤.

```java
NutritionFacts cocaCola = new NutritionFacts(240, 8, 100, 0, 27);
```

ê·¸ë ‡ì§€ë§Œ, ì‚¬ìš©ìê°€ ì„¤ì •í•˜ê¸¸ ì›ì¹˜ ì•Šì€ ë§¤ê°œë³€ìˆ˜ì—ë„ ê°’ì„ ì§€ì •í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.(ex: ìœ„ì— ì½”ë“œì—ì„œ fatì„ 0ìœ¼ë¡œ ì„¤ì •í•¨).
ë˜í•œ ë§¤ê°œë³€ìˆ˜ê°€ ë” ëŠ˜ì–´ë‚˜ë©´ ê¸ˆì„¸ ê±·ì¡ì„ ìˆ˜ ì—†ê²Œ ë©ë‹ˆë‹¤.

### ë¬¸ì œì  

- ì„ íƒ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§€ë©´ ìƒì„±ìë„ ëŠ˜ì–´ë‚˜ê²Œ ëœë‹¤.

## ğŸ§ ìë°”ë¹ˆì¦ˆ íŒ¨í„´(JavaBeans Pattern)

**ìë°”ë¹ˆì¦ˆ íŒ¨í„´(JavaBeans Pattern)**

```java
public class NutritionFacts {
	private  int servingSize = -1;
  private  int servings 		= -1;
  
  private  int caloreis 		= 0;
  private  int fat 				= 0;
  private  int carbohydrate= 0;
    
  public NutritionFacts() {}
  //ì„¸í„° ë©”ì„œë“œë“¤
  ...setter
}
```

ì ì¦ì²™ ìƒì„±ì íŒ¨í„´ì˜ ë‹¨ì ë“¤ì´ ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì—ì„œëŠ” ë³´ì´ì§€ ì•ŠìŠµë‹ˆë‹¤.

ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì´ ìƒì„±í•©ë‹ˆë‹¤.

```java
NutritionFacts cocaCola = new NutritionFacts();
cocaCola.setServingSize(240);
cocaCola.setServings(8);
cocaCola.setCaloreis(100);
...
```

ê·¸ì¹˜ë§Œ ìë°”ë¹ˆì¦ˆë„ ì‹¬ê°í•œ ë‹¨ì ì„ ê°–ê³  ìˆëŠ”ë°, **<u>ê°ì²´ í•˜ë‚˜ë¥¼ ë§Œë“¤ë ¤ë©´ ì—¬ëŸ¬ ê°œì˜ í˜¸ì¶œì„ í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì—, ê°ì²´ê°€ ì™„ì „íˆ ìƒì„±ë˜ê¸° ì „ê¹Œì§€ëŠ” ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ ìƒíƒœê°€ ë©ë‹ˆë‹¤.</u>**

### ğŸ˜­ ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ë‹¤ëŠ” ë§ì´ ë¬´ìŠ¨ë§ì¼ê¹Œ?

ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ë‹¤ëŠ” ë§ì€ ë§Œì•½ ì•„ë˜ì™€ ê°™ì´ ê°ì²´ë¥¼ ì„¸íŒ…í–ˆë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.

```java
NutritionFacts cocaColoa = new NutritionFacts();
cocaCola.setServingSize(240);
cocaCola.setCaloreis(100):
```

ì´ë ‡ê²Œ ì…‹íŒ…ì„ í•˜ë©´ í•„ìˆ˜ ë§¤ê°œë³€ìˆ˜ì˜€ë˜ **<u>servings í•„ë“œ</u>**ëŠ” ì„¸íŒ…ì´ ë˜ì§€ ì•Šì•„ ê·¸ ê²°ê³¼ ê°ì²´ê°€ ìœ íš¨í•˜ì§€ ì•Šì€ ìƒíƒœê°€ ë©ë‹ˆë‹¤.

ë§Œì•½ ìœ íš¨í•œ ê°ì²´ê°€ ë“¤ì–´ì˜¬ ê²ƒì´ë¼ê³  ì˜ˆìƒí•œ `healthRiskCalculator.calculateHealthRisk(NutritionFacts facts)` ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ê²Œ ë˜ë©´ **<u>ì˜ˆì™¸</u>**ê°€ ë°œìƒí•˜ê²Œ ë©ë‹ˆë‹¤. **ì´ëŸ° ê²½ìš°ë¥¼ ì¼ê´€ì„±ì´ ê¹¨ì§„ë‹¤ê³  í•©ë‹ˆë‹¤.**

 ì¼ê´€ì„±ì´ ê¹¨ì§€ë©´, í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ì—†ê¸° ë•Œë¬¸ì—, ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì„ ì–»ì§€ë„ ëª»í•˜ë¯€ë¡œ, ìŠ¤ë ˆë“œ ì•ˆì „ì„±ì„ ì–»ê¸° ìœ„í•´ì„œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ë™ê¸°í™” ì‘ì—…ê°™ì€ ì¶”ê°€ì‘ì—…ì„ í•´ì¤˜ì•¼ë§Œ í•©ë‹ˆë‹¤.

## ğŸ˜‹ í•´ê²° - ë¹Œë” íŒ¨í„´

**ë¹Œë”íŒ¨í„´**

```java
public class NutritionFacts {
	private final int servingSize;  
  private final int servings;			
  
  private final int caloreis; 	
  private final int fat;				
  private final int carbohydrate;
  
  public static class Builder {
    // í•„ìˆ˜ ë§¤ê°œ ë³€ìˆ˜
    private final int servingSize;
    private final int servings;
    
    //ì„ íƒ ë§¤ê°œ ë³€ìˆ˜ - ê¸°ë³¸ ê°’ìœ¼ë¡œ ì´ˆê¸°í™” í•œë‹¤.
    private int calories			= 0;
    private int fat						= 0;
    private int carbohydrate	= 0;
    
    public Builder(int servingSize, int servings) {
      this.servingSize = servingSize;
      this.servings 	 = servings;
    }
    
    public Builder caloreis(int val) {
      calores = val; return this;
    }
    
    public Builder fat(int val) {
      fat = val; return this;
    }
    
    public Builder carbohydrate(int val) {
      carbohydrate = val; return this;
    }
    
    public NutritionFacts buld() {
      return new NutritionFacts(this):
    }
  }
  
  private NutritionFacts(Builder builder){
    servingSize		=	builder.servingSize;
    servings			= builder.servings;
    calories			=	builder.calories;
    fat						=	builder.fat;
    carbohydrate	=	builder.carbohydrate;
  }
}
```

NutritionFacts í´ë˜ìŠ¤ëŠ” ë¶ˆë³€ì´ë©°, ëª¨ë“  ë§¤ê°œë³€ìˆ˜ì˜ ê¸°ë³¸ê°’ë“¤ì„ í•œê³³ì— ëª¨ì•„ë‘ì—ˆìŠµë‹ˆë‹¤. ë¹Œë”ì˜ ì„¸í„° ë©”ì„œë“œë“¤ì€ ë¹Œë”ì¸ ìê¸°ìì‹ ì„ ë°˜í™˜í•˜ê¸° ë•Œë¬¸ì— ì—°ì‡„ì ìœ¼ë¡œ í˜¸ì¶œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
NutritionFacts cocaCola = new NutritionFacts.Builder(240,8)
  .calories(100).carbohydrate(10).build();
```

ìœ„ì— ì½”ë“œëŠ” ì“°ê¸° ì‰½ê³  ë¬´ì—‡ë³´ë‹¤ ê°€ë…ì„±ì´ ë†’ìœ¼ë©°, ë¹Œë”ë¥¼ ì´ìš©í•˜ë©´ ê°€ë³€ì¸ìˆ˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì—¬ëŸ¬ ê°œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 


## ì •ë¦¬

### **ì¥ì **

- ë¹Œë” íŒ¨í„´ì€ ì ì¸µì  ìƒì„±ì íŒ¨í„´ë³´ë‹¤ëŠ” ì½”ë“œê°€ ì¥í™©í•´ì„œ ë§¤ê°œ ë³€ìˆ˜ê°€ 4ê°œ ì´ìƒì€ ë˜ì–´ì•¼ ê°’ì–´ì¹˜ í•œë‹¤.
  - í•˜ì§€ë§Œ APIëŠ” ì‹œê°„ì´ ì§€ë‚ ìˆ˜ë¡ ë§¤ê°œë³€ìˆ˜ê°€ ë§ì•„ì§€ëŠ” ê²½í–¥ì´ ìˆì–´ì„œ ì²˜ìŒë¶€í„° ë¹Œë”íŒ¨í„´ì„ ì ìš©í•˜ëŠ” ê²ƒë„ ì¢‹ë‹¤.
- ë¹Œë” íŒ¨í„´ì€ ìƒë‹¹íˆ ìœ ì—°í•˜ê¸° ë•Œë¬¸ì— ì„ íƒì  ë§¤ê°œë³€ìˆ˜ë¥¼ ì´ìš©í•´ ê°ì²´ë¥¼ ìƒì„±í•  ë•Œ ìœ ìš©í•˜ë‹¤.
- ìƒì„±ìë‚˜ ì •ì  íŒ©í„°ë¦¬ê°€ ì²˜ë¦¬í•´ì•¼ í•  ë§¤ê°œë³€ìˆ˜ê°€ ë§ë‹¤ë©´ ë¹Œë” íŒ¨í„´ì„ ì„ íƒí•˜ëŠ”ê²Œ ë” ë‚«ë‹¤.
- Lombokì˜ @Builder ì–´ë…¸í…Œì´ì…˜ì„ ì´ìš©í•˜ë©´, Builder í´ë˜ìŠ¤ë¥¼ ê°œë°œìê°€ ë§Œë“¤ì–´ì£¼ì§€ ì•Šì•„ë„ ëœë‹¤.

## ì°¸ê³ ìë£Œ

```
Pizza pizza = new Pizza(12);
pizza.setCheese(true);
pizza.setPepperoni(true);
pizza.setBacon(true);
```

**ìœ„ì— ì½”ë“œëŠ” ìŠ¤ë ˆë“œ ì„¸ì´í”„í• ê¹Œ? ê°€ ê¶ê¸ˆí–ˆëŠ”ë°, ì•„ë˜ì—ì„œ ë‹µë³€ì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.**
https://stackoverflow.com/questions/44345780/whyjava-bean-pattern-is-not-threadsafe

**ìë°”ë¹ˆì¦ˆ íŒ¨í„´ì„ ì‚¬ìš©í•  ë•Œ, ì¼ê´€ì„±ì´ ë¬´ë„ˆì§„ë‹¤ëŠ” ë§ì´ ì •í™•íˆ ë¬´ìŠ¨ëœ»ì¸ì§€ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤.**
https://stackoverflow.com/questions/23169795/javabean-disadvantage-inconsistent-during-construction