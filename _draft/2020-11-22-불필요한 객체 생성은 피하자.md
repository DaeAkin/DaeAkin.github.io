---
layout: post
title: 불필요한 객체 생성은 피하자
categories: [이펙티브자바]
comments: true 
tags:
- 이펙티브자바
---



똑같은 기능의 객체를 매번 생성하기 보다는 객체 하나를 재사용하는 편이 당연히 좋다. 특히 불변 객체로 만들어진 객체라면 언제든지 재사용 할 수 있다.

불변 객체는 대표적으로 우리가 자주쓰는 String 객체가 있다.

```java
String newString = new String("new String"); // 1

String justString = "just String"; // 2
String anotherJustString = "just String";; //3
```

위에 예제에서 몇 개의 String 객체가 만들어 질까? 

정답은 총 2개의 String 객체가 만들어진다. newString에 의해 생긴 String은 바로 Heap 메모리에 올라가고, justString과 anotherJustString은 Heap 메모리에 있는 **String Constant Pool**이 관리하기 때문이다.

![](https://cdn.journaldev.com/wp-content/uploads/2012/11/String-Pool-Java1-450x249.png)

그 결과로 anotherJustString 객체를 만들 때, String Pool에서 "just String"이라는 객체가 이미 있는지 확인해서, 있으면 그 객체를 재활용 한다. 

그와 반대로, newString은 Heap에 새로운 객체를 올리기 때문에, 사용 후 바로 가비지 컬렉션의 대상이 된다.

또 다른 예로 Boolean(String) 생성자 대신 Boolean.valueOf(String) 팩터리 메서드를 사용하는 것이 좋다. 이 팩터리 메서드를 사용하게 되면, Boolean 클래스가 미리 만들어논 객체를 리턴하기 때문에, 객체를 추가적으로 만들지 않아도 된다.

**Boolean.java**

```java
public final class Boolean implements java.io.Serializable,
                                      Comparable<Boolean>
{
		// 정적 변수로 미리 초기화를 해놓는다.
    public static final Boolean TRUE = new Boolean(true);
    public static final Boolean FALSE = new Boolean(false);
                                        
    public static Boolean valueOf(String s) {
        return parseBoolean(s) ? TRUE : FALSE; //이미 만들어져 있는 객체를 리턴한다.
    }                                    
 }
```



